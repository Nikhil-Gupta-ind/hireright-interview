import{r as o,j as s,c as H,p as W,g as q,Y as K,T as Y,O as G,B as J,A as X,a as ee,b as te,h as se,W as ne}from"./index-B4okS-fw.js";import{a as ie}from"./session-CrLfDL4Y.js";import{A as B,T as le}from"./TimeoutScreen-BstQl5j9.js";import{M as ae,i as oe,u as z,P as re,a as ce,b as fe,L as ue,m as P,H as de}from"./Gradient-BsVXDp_j.js";import{S as me}from"./icon-arrow-forward-EkO6fcUb.js";const pe=t=>o.createElement("svg",{width:31,height:32,viewBox:"0 0 31 32",fill:"none",xmlns:"http://www.w3.org/2000/svg",...t},o.createElement("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M10.6259 0C12.3879 0 13.2652 2.11079 12.0122 3.33564L7.1885 8.0512C5.32332 9.87455 5.10257 12.7781 6.67118 14.8566L6.8157 15.048C8.67293 17.5089 12.2715 17.8506 14.5685 15.7842L15.0781 15.3256C15.8534 14.6281 17.0453 14.6523 17.791 15.3807L27.5403 24.9039C27.5423 24.9059 27.5409 24.9093 27.5381 24.9093C27.5352 24.9093 27.5338 24.9128 27.536 24.9147L27.7156 25.0753L28.2604 25.6074C28.5087 25.85 28.7165 26.1254 28.8795 26.4234C29.1802 26.9731 28.9747 27.6286 28.5508 28.0922L26.8686 29.9323C26.1383 30.731 24.8915 30.7932 24.0837 30.0713L23.7423 29.7663C23.0293 29.129 21.9554 29.093 21.2003 29.6809L18.7587 31.5821C17.9521 32.2101 16.793 32.1211 16.0942 31.3774L14.4702 29.6492C13.6829 28.8114 12.3387 28.8205 11.563 29.6689L10.1744 31.1877C9.45041 31.9795 7.83517 32.3368 6.38542 31.0056L0.0300595 24.9093C0.0109209 24.8922 0 24.8679 0 24.8423V6.80824C0 6.29085 0.208031 5.79469 0.578268 5.42904L5.49806 0.57022C5.86777 0.205093 6.36897 0 6.89153 0H10.6259ZM9.20613 24.8773C9.20353 24.8801 9.20375 24.8845 9.20662 24.8871L9.22948 24.9075C9.23076 24.9086 9.23243 24.9093 9.23417 24.9093C9.24057 24.9093 9.24361 24.9015 9.23886 24.8972L9.21601 24.8768C9.21315 24.8742 9.20872 24.8744 9.20613 24.8773Z",fill:"#D5621B"}),o.createElement("path",{d:"M24.1086 0C24.6311 0 25.1323 0.205097 25.502 0.570232L30.4217 5.42904C30.792 5.79469 31 6.29085 31 6.80823V24.2264C31 24.6035 30.6908 24.9093 30.3093 24.9093C30.0945 24.9093 29.8941 24.8086 29.7528 24.6487C29.6696 24.5546 29.5827 24.4632 29.4922 24.3747L19.14 14.2626C18.3621 13.5026 18.3583 12.2619 19.1316 11.4973L20.8127 9.83531C21.155 9.49694 21.155 8.94832 20.8127 8.60994C20.4705 8.27156 19.9156 8.27156 19.5733 8.60993L15.8794 12.2619L13.3889 14.5025C11.8575 15.8801 9.45852 15.6524 8.22036 14.0118L8.07595 13.8204C7.03022 12.4347 7.1773 10.499 8.42072 9.28344L17.3409 0.56321C17.71 0.202374 18.2082 0 18.7273 0H24.1086Z",fill:"#D5621B"})),xe="/hireright-interview/assets/fcam-blur-Cu04typP.svg",he="/hireright-interview/assets/fcam-blur2-Brfxj0gL.svg",ge=t=>o.createElement("svg",{width:24,height:24,viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg",...t},o.createElement("path",{d:"M11 13H5V11H11V5H13V11H19V13H13V19H11V13Z",fill:"#1D1B20"})),ve=t=>o.createElement("svg",{width:24,height:24,viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg",...t},o.createElement("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M2 12C2 6.477 6.477 2 12 2C17.523 2 22 6.477 22 12C22 17.523 17.523 22 12 22C6.477 22 2 17.523 2 12ZM12 8C12 7.73478 11.8946 7.48043 11.7071 7.29289C11.5196 7.10536 11.2652 7 11 7C10.7348 7 10.4804 7.10536 10.2929 7.29289C10.1054 7.48043 10 7.73478 10 8V13C10 13.2652 10.1054 13.5196 10.2929 13.7071C10.4804 13.8946 10.7348 14 11 14H16C16.2652 14 16.5196 13.8946 16.7071 13.7071C16.8946 13.5196 17 13.2652 17 13C17 12.7348 16.8946 12.4804 16.7071 12.2929C16.5196 12.1054 16.2652 12 16 12H12V8Z",fill:"#0C0C0E"})),Ce=t=>o.createElement("svg",{width:24,height:24,viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg",...t},o.createElement("path",{d:"M4 19C3.45 19 2.97917 18.8042 2.5875 18.4125C2.19583 18.0208 2 17.55 2 17V7C2 6.45 2.19583 5.97917 2.5875 5.5875C2.97917 5.19583 3.45 5 4 5H20C20.55 5 21.0208 5.19583 21.4125 5.5875C21.8042 5.97917 22 6.45 22 7V17C22 17.55 21.8042 18.0208 21.4125 18.4125C21.0208 18.8042 20.55 19 20 19H4ZM4 17H20V7H4V17ZM8 16H16V14H8V16ZM5 13H7V11H5V13ZM8 13H10V11H8V13ZM11 13H13V11H11V13ZM14 13H16V11H14V13ZM17 13H19V11H17V13ZM5 10H7V8H5V10ZM8 10H10V8H8V10ZM11 10H13V8H11V10ZM14 10H16V8H14V10ZM17 10H19V8H17V10Z",fill:"white"})),we=({companion:t,className:e="",sessionCode:n})=>{const r=o.useRef(null),l=!0,[i,g]=o.useState(null),[a,x]=o.useState(!1),[f,m]=o.useState(null);return o.useEffect(()=>{x(!0);const u=async()=>{try{const d=await ie(n);d&&d.analysis&&d.analysis.summary?g(d.analysis.summary):m("Oops your interview summary is unavailable at the moment!")}catch(d){console.error("Failed to load summary",d),m("Oops your interview summary is unavailable at the moment!")}finally{x(!1)}},c=setTimeout(()=>{n&&l?u():(m("Oops your interview summary is unavailable at the moment!"),x(!1))},18e3);return()=>clearTimeout(c)},[n]),o.useEffect(()=>{a||setTimeout(()=>{const u=r.current;u&&u.scrollTo({top:u.scrollHeight,behavior:"smooth"})},100)},[a]),s.jsxs("div",{className:`${e} relative`,children:[s.jsx("div",{className:"relative w-32 shrink-0 mr-8 hidden md:block select-none",children:s.jsx(B,{companion:t,size:"128px",className:`
            shadow-sm absolute left-0 transition-all duration-1000 ease-in-out
            ${!a&&l?"top-1/2 -translate-y-1/2":"top-0 translate-y-0"}`})}),s.jsx("div",{className:"md:hidden mb-6 flex justify-center w-full",children:s.jsx(B,{companion:t,size:"96px"})}),s.jsxs("div",{ref:r,className:"flex flex-col min-w-0 flex-1 min-h-0 overflow-y-auto relative",children:[s.jsx("div",{children:s.jsx("p",{className:"font-dm-serif font-normal text-[32px] text-[#58240E] leading-[40.96px] italic whitespace-pre-line m-0",children:"That was a wonderful conversation!"})}),s.jsx("p",{className:"font-hanken font-normal text-[20px] text-black leading-[138%] whitespace-pre-line m-0 mt-6",children:"Here are some insights from our Chat!"}),s.jsxs("div",{className:"relative min-h-[100px] mt-4",children:[a?s.jsxs("div",{className:"w-full animate-pulse space-y-4",children:[s.jsx("div",{className:"h-5 bg-[rgba(88,36,14,0.1)] rounded w-3/4"}),s.jsx("div",{className:"h-5 bg-[rgba(88,36,14,0.1)] rounded w-full"}),s.jsx("div",{className:"h-5 bg-[rgba(88,36,14,0.1)] rounded w-5/6"}),s.jsx("div",{className:"h-5 bg-[rgba(88,36,14,0.1)] rounded w-4/5"})]}):null,f&&s.jsx("div",{className:"p-4 bg-red-50 text-red-700 rounded-md font-hanken",children:f}),!a&&i&&s.jsx("div",{className:"font-hanken font-normal text-[20px] text-black leading-[27.6px] whitespace-pre-line",children:i})]}),s.jsx("p",{className:"mt-10 font-dm-serif font-normal text-[32px] text-[#58240E] leading-[40.96px] italic whitespace-pre-line",children:"Hereâ€™s what happens next..."}),!a&&s.jsx("p",{className:"font-hanken font-normal text-[20px] text-black leading-[138%] whitespace-pre-line m-0 mt-10 mb-10",children:"You'll receive detailed feedback from our team within 24 hours via email. This will include insights on your responses and information about the next steps in our process."})]})]})},je=t=>{const e=H.c(13),{currentMessage:n,companion:r,className:l}=t,g=`${l===void 0?"":l}`;let a;e[0]!==r?(a=s.jsx(B,{companion:r}),e[0]=r,e[1]=a):a=e[1];const x=n||"Waiting for companion...";let f;e[2]!==x?(f=s.jsx("span",{className:"font-hanken text-[28px] font-medium leading-[35.84px] text-black whitespace-pre-line",children:x}),e[2]=x,e[3]=f):f=e[3];let m;e[4]===Symbol.for("react.memo_cache_sentinel")?(m=s.jsx("span",{className:"font-hanken text-[20px] text-[rgba(37,37,37,0.80)] font-medium leading-[25.6px] mt-11 whitespace-pre-line",children:`My goal is to help you showcase your best self while learning about your experience and skills. I'm here to make this as comfortable and natural as possible -  think of it as a friendly professional conversation rather than a formal interrogation.
            
            Ready to have a great conversation? I'm looking forward to getting to know you!`}),e[4]=m):m=e[4];let u;e[5]!==f?(u=s.jsxs("div",{className:"flex flex-col flex-1 min-h-0 overflow-y-auto mt-9.25 pr-2",children:[f,m]}),e[5]=f,e[6]=u):u=e[6];let c;e[7]!==a||e[8]!==u?(c=s.jsxs("div",{className:"flex flex-col py-15 max-h-full",children:[a,u]}),e[7]=a,e[8]=u,e[9]=c):c=e[9];let d;return e[10]!==g||e[11]!==c?(d=s.jsx("div",{className:g,children:c}),e[10]=g,e[11]=c,e[12]=d):d=e[12],d};function D(t,e){if(typeof t=="function")return t(e);t!=null&&(t.current=e)}function ye(...t){return e=>{let n=!1;const r=t.map(l=>{const i=D(l,e);return!n&&typeof i=="function"&&(n=!0),i});if(n)return()=>{for(let l=0;l<r.length;l++){const i=r[l];typeof i=="function"?i():D(t[l],null)}}}}function Ne(...t){return o.useCallback(ye(...t),t)}class be extends o.Component{getSnapshotBeforeUpdate(e){const n=this.props.childRef.current;if(n&&e.isPresent&&!this.props.isPresent){const r=n.offsetParent,l=oe(r)&&r.offsetWidth||0,i=this.props.sizeRef.current;i.height=n.offsetHeight||0,i.width=n.offsetWidth||0,i.top=n.offsetTop,i.left=n.offsetLeft,i.right=l-i.width-i.left}return null}componentDidUpdate(){}render(){return this.props.children}}function Ee({children:t,isPresent:e,anchorX:n,root:r}){const l=o.useId(),i=o.useRef(null),g=o.useRef({width:0,height:0,top:0,left:0,right:0}),{nonce:a}=o.useContext(ae),x=t.props?.ref??t?.ref,f=Ne(i,x);return o.useInsertionEffect(()=>{const{width:m,height:u,top:c,left:d,right:h}=g.current;if(e||!i.current||!m||!u)return;const p=n==="left"?`left: ${d}`:`right: ${h}`;i.current.dataset.motionPopId=l;const v=document.createElement("style");a&&(v.nonce=a);const C=r??document.head;return C.appendChild(v),v.sheet&&v.sheet.insertRule(`
          [data-motion-pop-id="${l}"] {
            position: absolute !important;
            width: ${m}px !important;
            height: ${u}px !important;
            ${p}px !important;
            top: ${c}px !important;
          }
        `),()=>{C.contains(v)&&C.removeChild(v)}},[e]),s.jsx(be,{isPresent:e,childRef:i,sizeRef:g,children:o.cloneElement(t,{ref:f})})}const Se=({children:t,initial:e,isPresent:n,onExitComplete:r,custom:l,presenceAffectsLayout:i,mode:g,anchorX:a,root:x})=>{const f=z(Le),m=o.useId();let u=!0,c=o.useMemo(()=>(u=!1,{id:m,initial:e,isPresent:n,custom:l,onExitComplete:d=>{f.set(d,!0);for(const h of f.values())if(!h)return;r&&r()},register:d=>(f.set(d,!1),()=>f.delete(d))}),[n,f,r]);return i&&u&&(c={...c}),o.useMemo(()=>{f.forEach((d,h)=>f.set(h,!1))},[n]),o.useEffect(()=>{!n&&!f.size&&r&&r()},[n]),g==="popLayout"&&(t=s.jsx(Ee,{isPresent:n,anchorX:a,root:x,children:t})),s.jsx(re.Provider,{value:c,children:t})};function Le(){return new Map}const Z=t=>t.key||"";function U(t){const e=[];return o.Children.forEach(t,n=>{o.isValidElement(n)&&e.push(n)}),e}const Ie=({children:t,custom:e,initial:n=!0,onExitComplete:r,presenceAffectsLayout:l=!0,mode:i="sync",propagate:g=!1,anchorX:a="left",root:x})=>{const[f,m]=ce(g),u=o.useMemo(()=>U(t),[t]),c=g&&!f?[]:u.map(Z),d=o.useRef(!0),h=o.useRef(u),p=z(()=>new Map),v=o.useRef(new Set),[C,N]=o.useState(u),[j,E]=o.useState(u);fe(()=>{d.current=!1,h.current=u;for(let y=0;y<j.length;y++){const w=Z(j[y]);c.includes(w)?(p.delete(w),v.current.delete(w)):p.get(w)!==!0&&p.set(w,!1)}},[j,c.length,c.join("-")]);const b=[];if(u!==C){let y=[...u];for(let w=0;w<j.length;w++){const L=j[w],I=Z(L);c.includes(I)||(y.splice(w,0,L),b.push(L))}return i==="wait"&&b.length&&(y=b),E(U(y)),N(u),null}const{forceRender:S}=o.useContext(ue);return s.jsx(s.Fragment,{children:j.map(y=>{const w=Z(y),L=g&&!f?!1:u===j||c.includes(w),I=()=>{if(v.current.has(w))return;if(v.current.add(w),p.has(w))p.set(w,!0);else return;let k=!0;p.forEach(M=>{M||(k=!1)}),k&&(S?.(),E(h.current),g&&m?.(),r&&r())};return s.jsx(Se,{isPresent:L,initial:!d.current||n?void 0:!1,custom:e,presenceAffectsLayout:l,mode:i,root:x,onExitComplete:L?void 0:I,anchorX:a,children:y},w)})})},ke=t=>{const e=H.c(17),{isListening:n,currentQuestion:r,className:l}=t,i=l===void 0?"":l,a=W()[0];let x;e[0]!==a?(x={participantIdentities:a?[a.identity]:[]},e[0]=a,e[1]=x):x=e[1];const m=q(x),u=o.useRef(null);let c;e[2]===Symbol.for("react.memo_cache_sentinel")?(c=()=>{u.current&&(u.current.scrollTop=u.current.scrollHeight)},e[2]=c):c=e[2];let d;e[3]!==m?(d=[m],e[3]=m,e[4]=d):d=e[4],o.useEffect(c,d);const h=`${i}`;let p;e[5]!==n||e[6]!==m?(p=n&&s.jsx("div",{ref:u,className:"flex-1 min-h-0 overflow-y-auto",children:s.jsx("span",{className:"block font-hanken text-[#393939CC] text-[20px] font-medium leading-7 whitespace-pre-line",children:m?.map(Re).join(" ")||(n?"...":"")})}),e[5]=n,e[6]=m,e[7]=p):p=e[7];let v;e[8]===Symbol.for("react.memo_cache_sentinel")?(v=s.jsx("span",{className:"block font-hanken font-bold text-[16px] text-[#0C0C0E7A] leading-6",children:"CURRENT QUESTION"}),e[8]=v):v=e[8];let C;e[9]!==r?(C=s.jsxs("div",{className:"mt-8 shrink-0",children:[v,s.jsx("span",{className:"block font-hanken text-black text-[32px] leading-[40.96px] mt-5.5 line-clamp-3",children:r})]}),e[9]=r,e[10]=C):C=e[10];let N;e[11]!==p||e[12]!==C?(N=s.jsxs("div",{className:"flex flex-col w-full max-h-full py-15",children:[p,C]}),e[11]=p,e[12]=C,e[13]=N):N=e[13];let j;return e[14]!==h||e[15]!==N?(j=s.jsx("div",{className:h,children:N}),e[14]=h,e[15]=N,e[16]=j):j=e[16],j};function Re(t){return t.text}const He=()=>{const t=H.c(1);let e;return t[0]===Symbol.for("react.memo_cache_sentinel")?(e=s.jsxs("div",{className:"flex gap-6 items-center",children:[s.jsx(pe,{}),s.jsx("div",{className:"w-px h-5 bg-[#0C0C0E3D]"}),s.jsx("span",{children:"John Doe Interview"})]}),t[0]=e):e=t[0],e},Me=t=>{const e=H.c(9),{isSpeaking:n}=t,r=n===void 0?!1:n;let l;e[0]===Symbol.for("react.memo_cache_sentinel")?(l={transformOrigin:"center",transformBox:"fill-box"},e[0]=l):l=e[0];let i;e[1]!==r?(i=s.jsx(P.path,{d:"M7.01238 3.448C7.61038 1.698 10.0284 1.645 10.7374 3.289L10.7974 3.449L11.6044 5.809C11.7893 6.35023 12.0882 6.84551 12.4808 7.26142C12.8734 7.67734 13.3507 8.00421 13.8804 8.22L14.0974 8.301L16.4574 9.107C18.2074 9.705 18.2604 12.123 16.6174 12.832L16.4574 12.892L14.0974 13.699C13.556 13.8838 13.0605 14.1826 12.6444 14.5753C12.2283 14.9679 11.9013 15.4452 11.6854 15.975L11.6044 16.191L10.7984 18.552C10.2004 20.302 7.78238 20.355 7.07438 18.712L7.01238 18.552L6.20638 16.192C6.02156 15.6506 5.72275 15.1551 5.33012 14.739C4.93749 14.3229 4.46017 13.9959 3.93038 13.78L3.71438 13.699L1.35438 12.893C-0.396622 12.295 -0.449622 9.877 1.19438 9.169L1.35438 9.107L3.71438 8.301C4.25561 8.11606 4.75089 7.81719 5.1668 7.42457C5.58271 7.03195 5.90959 6.55469 6.12538 6.025L6.20638 5.809L7.01238 3.448Z",fill:"currentColor",style:l,animate:r?{rotate:[0,360]}:{rotate:0},transition:r?{rotate:{duration:8,repeat:1/0,ease:"linear"}}:{duration:.3}}),e[1]=r,e[2]=i):i=e[2];let g;e[3]===Symbol.for("react.memo_cache_sentinel")?(g={transformBox:"fill-box",transformOrigin:"center"},e[3]=g):g=e[3];let a;e[4]!==r?(a=s.jsx(P.path,{d:"M16.9054 1.80688e-07C17.0925 -2.35972e-07 17.2758 0.0524783 17.4345 0.151472C17.5933 0.250465 17.7211 0.392003 17.8034 0.56L17.8514 0.677L18.2014 1.703L19.2284 2.053C19.4159 2.1167 19.5802 2.23462 19.7006 2.39182C19.821 2.54902 19.892 2.73842 19.9047 2.93602C19.9173 3.13362 19.871 3.33053 19.7716 3.50179C19.6722 3.67304 19.5242 3.81094 19.3464 3.898L19.2284 3.946L18.2024 4.296L17.8524 5.323C17.7886 5.51043 17.6706 5.6747 17.5133 5.79499C17.356 5.91529 17.1666 5.98619 16.969 5.99872C16.7714 6.01125 16.5746 5.96484 16.4034 5.86538C16.2322 5.76591 16.0944 5.61787 16.0074 5.44L15.9594 5.323L15.6094 4.297L14.5824 3.947C14.3949 3.8833 14.2305 3.76538 14.1101 3.60819C13.9898 3.45099 13.9187 3.26158 13.9061 3.06398C13.8935 2.86638 13.9398 2.66947 14.0392 2.49821C14.1385 2.32696 14.2865 2.18906 14.4644 2.102L14.5824 2.054L15.6084 1.704L15.9584 0.677C16.0258 0.479426 16.1534 0.307909 16.3232 0.186499C16.493 0.065089 16.6966 -0.000125281 16.9054 1.80688e-07Z",fill:"currentColor",style:g,animate:r?{rotate:[0,360],scale:[.2,1.2,.2],opacity:[.3,1,.3]}:{rotate:0,scale:1,opacity:1},transition:r?{rotate:{duration:3,repeat:1/0,ease:"easeInOut"},scale:{duration:1.5,repeat:1/0,ease:"easeInOut"},opacity:{duration:1.5,repeat:1/0,ease:"easeInOut"}}:{duration:.3}}),e[4]=r,e[5]=a):a=e[5];let x;return e[6]!==i||e[7]!==a?(x=s.jsxs("svg",{width:"20",height:"22",viewBox:"0 0 20 22",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:[i,a]}),e[6]=i,e[7]=a,e[8]=x):x=e[8],x},Te=t=>{const e=H.c(34),{quesNum:n,totalQues:r,companion:l,companionSpeaking:i,showAvatar:g,className:a}=t,x=i===void 0?!1:i,f=g===void 0?!1:g,u=`${a===void 0?"":a}`;let c;e[0]!==l||e[1]!==f?(c=f&&s.jsx(B,{companion:l}),e[0]=l,e[1]=f,e[2]=c):c=e[2];const d=`flex items-center gap-2 px-6 py-4 rounded-full border border-[#0C0C0EA3] ${x?"text-[#6466EA]":"text-[#0C0C0EA3]"} transition`;let h;e[3]!==x?(h=s.jsx(Me,{isSpeaking:x}),e[3]=x,e[4]=h):h=e[4];const p=l?.name;let v;e[5]!==p?(v=s.jsx("span",{className:"text-[16px] text-[#0C0C0EA3] font-medium leading-6 select-none",children:p}),e[5]=p,e[6]=v):v=e[6];let C;e[7]!==d||e[8]!==h||e[9]!==v?(C=s.jsxs("button",{className:d,children:[h," ",v]}),e[7]=d,e[8]=h,e[9]=v,e[10]=C):C=e[10];let N;e[11]!==C||e[12]!==c?(N=s.jsxs("div",{className:"flex gap-5.75 items-center",children:[c,C]}),e[11]=C,e[12]=c,e[13]=N):N=e[13];let j;e[14]!==n?(j=n.toString().padStart(2,"0"),e[14]=n,e[15]=j):j=e[15];let E;e[16]!==j?(E=s.jsx("span",{className:"font-hanken text-[28px] font-normal leading-[33.6px] text-black",children:j}),e[16]=j,e[17]=E):E=e[17];let b;e[18]!==r?(b=r.toString().padStart(2,"0"),e[18]=r,e[19]=b):b=e[19];let S;e[20]!==b?(S=s.jsxs("span",{className:"font-hanken text-[16px] font-normal leading-[33.6px] text-black",children:["/",b]}),e[20]=b,e[21]=S):S=e[21];let y;e[22]!==E||e[23]!==S?(y=s.jsxs("div",{children:[E,S]}),e[22]=E,e[23]=S,e[24]=y):y=e[24];let w;e[25]!==N||e[26]!==y?(w=s.jsxs("div",{className:"flex items-center justify-between",children:[N,y]}),e[25]=N,e[26]=y,e[27]=w):w=e[27];const L=`${n/r*100}%`;let I;e[28]!==L?(I=s.jsx("div",{className:"w-full h-1 bg-[#0C0C0E1F] relative",children:s.jsx("div",{className:"absolute left-0 top-0 h-full bg-[#0C0C0E] transition-all duration-300 ease-in-out",style:{width:L}})}),e[28]=L,e[29]=I):I=e[29];let k;return e[30]!==w||e[31]!==I||e[32]!==u?(k=s.jsxs("div",{className:u,children:[w,I]}),e[30]=w,e[31]=I,e[32]=u,e[33]=k):k=e[33],k},Ve=({duration:t,quesNum:e,showAnswerCard:n,showBlurBg:r,onImageClick:l})=>{const i=K([{source:Y.Source.Camera,withPlaceholder:!0}],{onlySubscribed:!1}),{localParticipant:g}=G(),a=o.useMemo(()=>({participantIdentities:g?.identity?[g.identity]:[]}),[g?.identity]),x=q(a),f=o.useRef(null),[m,u]=o.useState(0);o.useEffect(()=>{x&&u(x.length)},[e]);const c=x?x.slice(m):[];o.useEffect(()=>{f.current&&(f.current.scrollTop=f.current.scrollHeight)},[c]);const d=i.find(C=>C.participant.isLocal),[h,p]=o.useState(t*60);o.useEffect(()=>{if(h<=0)return;const C=setInterval(()=>{p(N=>N-1)},1e3);return()=>clearInterval(C)},[h]);const v=C=>{const N=Math.floor(C/60),j=C%60;return`${String(N).padStart(2,"0")}:${String(j).padStart(2,"0")}`};return s.jsx("div",{className:`flex flex-col h-full min-h-0
      ${n?"justify-start":"justify-center"}`,children:s.jsxs(P.div,{layout:!0,transition:{duration:.5,ease:"easeInOut"},className:`flex flex-col w-full rounded-3xl bg-[#FAFAFA] shadow
        ${n?"flex-1 min-h-0 overflow-hidden":"h-auto"}`,children:[n&&s.jsxs(P.div,{layout:!0,className:"flex flex-col flex-1 min-h-0 p-6",children:[s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsx("span",{className:"font-hanken font-bold text-[16px] leading-6 text-[#0C0C0ECC]",children:"YOUR ANSWER"}),s.jsxs("button",{className:"flex items-center justify-center gap-2 px-6 p-4 bg-[#FAFAFA] rounded-2xl shadow min-w-[122px] tabular-nums",children:[s.jsx(ve,{})," ",v(h)]})]}),s.jsx("span",{ref:f,className:"flex-1 min-h-0 max-w-112.75 font-hanken font-medium text-[18px] text-[#393939] leading-7 pt-7.5 pb-10 my-2 overflow-y-auto whitespace-pre-line",children:c.map(C=>C.text).join(" ")||"Start speaking..."}),s.jsxs("div",{className:"flex gap-3 justify-end",children:[s.jsx("button",{className:"py-4 px-3 bg-(--color-primary) rounded-2xl",children:s.jsx(Ce,{})}),s.jsx("button",{className:"px-3 py-4 rounded-2xl",children:s.jsx(ge,{})})]})]}),s.jsxs(P.div,{layout:!0,className:"relative w-full select-none",children:[s.jsx(Ie,{children:r&&s.jsx(P.img,{src:n?he:xe,alt:"","aria-hidden":!0,initial:{opacity:0},animate:{y:n?-24:24,opacity:n?1:.85},exit:{opacity:0},transition:{duration:.35,ease:"easeInOut"},className:`
                  absolute inset-0 object-cover rounded-3xl
                  pointer-events-none
                `})}),s.jsx("div",{className:"h-96.5 w-full rounded-3xl overflow-hidden relative z-10 cursor-pointer",children:d?s.jsx(J,{trackRef:d,style:{aspectRatio:"515/386",transform:"scale(-1, 1)"},className:"w-full h-full object-cover drop-shadow-2xl",onClick:l}):s.jsx("div",{className:"w-full h-full bg-black cursor-pointer",style:{aspectRatio:"515/386"},onClick:l})})]})]})})},R={GREETING:"greeting",QUESTION:"question",LISTENING:"listening",TIMEUP:"time_exceeded",ENDING:"ending",COMPLETE:"complete"},Oe=t=>{const e=H.c(37),{sessionCode:n,sessionData:r,selectedCompanion:l,quesNum:i,totalQuestions:g,currentQuestion:a,currentMessage:x,state:f,questionOver:m,onImageClick:u}=t,c=f===R.LISTENING;let d;e[0]===Symbol.for("react.memo_cache_sentinel")?(d=s.jsx(He,{}),e[0]=d):d=e[0];let h;e[1]!==x||e[2]!==l||e[3]!==f?(h=f===R.GREETING&&s.jsx(je,{companion:l,currentMessage:x,className:"flex flex-1 min-h-0 items-center justify-center"}),e[1]=x,e[2]=l,e[3]=f,e[4]=h):h=e[4];let p;e[5]!==a||e[6]!==c||e[7]!==m||e[8]!==f?(p=(f===R.QUESTION||c&&!m)&&s.jsx(ke,{isListening:c,currentQuestion:a,className:"flex flex-1 flex-col justify-center"}),e[5]=a,e[6]=c,e[7]=m,e[8]=f,e[9]=p):p=e[9];let v;e[10]!==m||e[11]!==l||e[12]!==n?(v=m&&s.jsx(we,{sessionCode:n,companion:l,className:"flex gap-8.75 flex-1 min-h-0 py-15"}),e[10]=m,e[11]=l,e[12]=n,e[13]=v):v=e[13];let C;e[14]!==h||e[15]!==p||e[16]!==v?(C=s.jsxs("div",{className:"flex-1 min-h-0 flex",children:[h,p,v]}),e[14]=h,e[15]=p,e[16]=v,e[17]=C):C=e[17];let N;e[18]!==c||e[19]!==i||e[20]!==m||e[21]!==l||e[22]!==f||e[23]!==g?(N=!m&&s.jsx(Te,{companion:l,showAvatar:f==R.QUESTION||c,companionSpeaking:!c,quesNum:i,totalQues:g,className:"flex flex-col gap-4.75"}),e[18]=c,e[19]=i,e[20]=m,e[21]=l,e[22]=f,e[23]=g,e[24]=N):N=e[24];let j;e[25]!==C||e[26]!==N?(j=s.jsxs("div",{className:"flex-[0.75] flex flex-col min-h-0",children:[d,s.jsxs("div",{className:"flex-1 flex flex-col min-h-0",children:[C,N]})]}),e[25]=C,e[26]=N,e[27]=j):j=e[27];const E=r?.duration,b=c&&!m,S=!m;let y;e[28]!==u||e[29]!==i||e[30]!==S||e[31]!==E||e[32]!==b?(y=s.jsx(Ve,{duration:E,quesNum:i,showAnswerCard:b,showBlurBg:S,onImageClick:u}),e[28]=u,e[29]=i,e[30]=S,e[31]=E,e[32]=b,e[33]=y):y=e[33];let w;return e[34]!==y||e[35]!==j?(w=s.jsxs("div",{className:"w-full flex-1 min-h-0 flex items-stretch justify-between gap-0 flex-col lg:flex-row overflow-hidden",children:[j,y]}),e[34]=y,e[35]=j,e[36]=w):w=e[36],w},Pe=t=>{const e=H.c(4),{onFinish:n}=t;let r;e[0]===Symbol.for("react.memo_cache_sentinel")?(r=s.jsx("div",{className:"h-px bg-[#0C0C0E1F] mb-11"}),e[0]=r):r=e[0];let l;e[1]===Symbol.for("react.memo_cache_sentinel")?(l=s.jsx(me,{className:"transition-transform duration-300 group-hover:translate-x-1"}),e[1]=l):l=e[1];let i;return e[2]!==n?(i=s.jsxs("div",{className:"mt-16",children:[r,s.jsxs("button",{onClick:n,className:"group px-6 py-4 rounded-[18px] bg-black text-white flex items-center gap-3 hover:brightness-90 active:scale-95 transition-transform duration-150 ease-in-out select-none",children:["Finish Interview",l]})]}),e[2]=n,e[3]=i):i=e[3],i};function _e(){const[t,e]=o.useState(null),[n,r]=o.useState(null),[l,i]=o.useState(""),[g,a]=o.useState(0),x=o.useCallback(f=>{try{const{payload:m,topic:u}=f,c=new TextDecoder().decode(m),d=JSON.parse(c);if(console.log("[InterviewState] Received message on topic:",u,d),d.type==="interview_state"){const{state:h,data:p}=d;console.log("[InterviewState] Updating state:",h,p),e(h),r(p),h===R.QUESTION&&p.message&&i(p.message),h===R.QUESTION&&p.questionIndex!==void 0&&a(p.questionIndex)}}catch(m){console.error("[InterviewState] Failed to parse message:",m,f)}},[]);return X("interview_state",x),{currentState:t,stateData:n,questionIndex:g,totalQuestions:n?.totalQuestions||0,currentMessage:n?.message||"",currentQuestion:l,agentName:n?.agentName||"",agentAvatar:n?.agentAvatar||"",isEnding:t===R.ENDING,isCompleted:t===R.COMPLETE}}const De=()=>{const t=H.c(40),e=ee(),{sessionData:n,selectedCompanion:r}=te(),l=n?.sessionCode;let i;t[0]!==e?(i=()=>{e("/feedback",{replace:!0})},t[0]=e,t[1]=i):i=t[1];const g=i,{currentState:a,currentQuestion:x,currentMessage:f,questionIndex:m,totalQuestions:u}=_e(),{room:c,state:d}=se(),h=ne(),p=G(),[v,C]=o.useState(!1),[N,j]=o.useState(!1);let E,b;t[2]!==a?(E=()=>{a===R.ENDING&&C(!0),a===R.TIMEUP&&j(!0)},b=[a],t[2]=a,t[3]=E,t[4]=b):(E=t[3],b=t[4]),o.useEffect(E,b);let S,y;t[5]!==p?(S=()=>{console.log("Local Participant:",p)},y=[p],t[5]=p,t[6]=S,t[7]=y):(S=t[6],y=t[7]),o.useEffect(S,y);let w,L;t[8]!==h?(w=()=>{console.log("Participants:",h),console.log("Total Participants:",h.length),console.log("Remote Participants:",h.filter($e))},L=[h],t[8]=h,t[9]=w,t[10]=L):(w=t[9],L=t[10]),o.useEffect(w,L);let I,k;t[11]!==d||t[12]!==p||t[13]!==c?(I=()=>{d==="connected"&&(console.log("Connected to LiveKit Room. Room Info:",c),console.log("Local Mic Enabled:",p.isMicrophoneEnabled),console.log("Local Audio Tracks:",p.audioTrackPublications))},k=[d,p,c],t[11]=d,t[12]=p,t[13]=c,t[14]=I,t[15]=k):(I=t[14],k=t[15]),o.useEffect(I,k);let M,_;if(t[16]!==a?(_=()=>{console.log("[Interview] Current State:",a)},M=[a],t[16]=a,t[17]=M,t[18]=_):(M=t[17],_=t[18]),o.useEffect(_,M),N){let Q;return t[19]===Symbol.for("react.memo_cache_sentinel")?(Q=s.jsx(le,{}),t[19]=Q):Q=t[19],Q}const F=`h-screen ${a===R.COMPLETE?"bg-(--color-bg)":"bg-[#FEFEFE]"} p-8 sm:p-12 lg:p-18 relative flex flex-col overflow-clip`;let $;t[20]===Symbol.for("react.memo_cache_sentinel")?($=s.jsx(de,{}),t[20]=$):$=t[20];let T;t[21]!==f||t[22]!==x||t[23]!==a||t[24]!==m||t[25]!==v||t[26]!==r||t[27]!==l||t[28]!==n||t[29]!==u?(T=s.jsx(Oe,{sessionCode:l,sessionData:n,selectedCompanion:r,quesNum:m,totalQuestions:u,currentQuestion:x,currentMessage:f,state:a,questionOver:v}),t[21]=f,t[22]=x,t[23]=a,t[24]=m,t[25]=v,t[26]=r,t[27]=l,t[28]=n,t[29]=u,t[30]=T):T=t[30];let V;t[31]!==g||t[32]!==v?(V=v&&s.jsx(Pe,{onFinish:()=>{g()}}),t[31]=g,t[32]=v,t[33]=V):V=t[33];let O;t[34]!==T||t[35]!==V?(O=s.jsxs("div",{className:"relative z-10 flex flex-col flex-1 min-h-0",children:[T,V]}),t[34]=T,t[35]=V,t[36]=O):O=t[36];let A;return t[37]!==F||t[38]!==O?(A=s.jsxs("div",{className:F,children:[$,O]}),t[37]=F,t[38]=O,t[39]=A):A=t[39],A};function $e(t){return!t.isLocal}export{De as default};
